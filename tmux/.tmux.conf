# -----------------------------------------------------------------------------
# # 1. PLUGINS (TPM - Tmux Plugin Manager)
# -----------------------------------------------------------------------------
set -g @plugin 'tmux-plugins/tpm'           # The plugin manager itself
set -g @plugin 'tmux-plugins/tmux-sensible' # Sensible default settings
set -g @plugin 'tmux-plugins/tmux-yank'


# -----------------------------------------------------------------------------
# # 2. THEME DEFINITION
# -----------------------------------------------------------------------------
# This is the ONLY section you need to edit to change the theme.
# All colors are defined here as generic variables.

# -- Dracula Theme Colors --
set -g @theme-bg            '#282a36' # Main background
set -g @theme-bg-alt        '#44475a' # Lighter background (status bar)
set -g @theme-fg            '#f8f8f2' # Main foreground
set -g @theme-comment       '#6272a4' # Inactive text and borders
set -g @theme-accent-active '#ff79c6' # Active element accent (e.g., active window, pane border)
set -g @theme-accent-green  '#50fa7b'
set -g @theme-accent-yellow '#f1fa8c' # Used for prefix indicator
set -g @theme-accent-purple '#bd93f9'
set -g @theme-accent-cyan   '#8be9fd' # Added for the time display


# -----------------------------------------------------------------------------
# # 3. CORE SETTINGS
# -----------------------------------------------------------------------------
# Set the prefix key to ` (backtick)
unbind C-b
set-option -g prefix `
bind-key ` send-prefix

# Set terminal to support 256-bit and true color
set -g default-terminal "tmux-256color"
set -ag terminal-overrides ",xterm-256color:RGB"

# Place the status bar at the top of the screen
set -g status-position top

# Set window and pane numbering to start at 1 instead of 0
set -g base-index 1
setw -g pane-base-index 1


# -----------------------------------------------------------------------------
# # 4. KEY BINDINGS
# -----------------------------------------------------------------------------
# Set vi mode for copy mode, as tmux-sensible does not set this
setw -g mode-keys vi

# --- Window Splitting ---
unbind % # Unbind default horizontal split
bind | split-window -h -c "#{pane_current_path}" # Split horizontally in current path

unbind '"' # Unbind default vertical split
bind _ split-window -v -c "#{pane_current_path}" # Split vertically in current path

# --- Pane Navigation ---
bind h select-pane -L
bind j select-pane -D
bind k select-pane -U
bind l select-pane -R

# --- Pane Resizing ---
bind H resize-pane -L 5
bind J resize-pane -D 5
bind K resize-pane -U 5
bind L resize-pane -R 5

# --- Clipboard ---
bind-key -T copy-mode-vi v send-keys -X begin-selection
# Use 'y' to yank (copy) and exit copy mode, triggering tmux-yank
bind-key -T copy-mode-vi y send-keys -X copy-selection-and-cancel

# --- Reload Config ---
bind r source-file ~/.tmux.conf \; display "Config Reloaded!"


# -----------------------------------------------------------------------------
# # 5. APPEARANCE (references the theme variables from section 2)
# -----------------------------------------------------------------------------
# --- Status Bar ---
set -g status-style "bg=#{E:@theme-bg-alt},fg=#{E:@theme-fg}"

# Left side of the status bar
set -g status-left-length 45
set -g status-left "#[bg=#{E:@theme-accent-green},fg=#{E:@theme-bg}]#{?client_prefix,#[bg=#{E:@theme-accent-yellow}],}  #S "

# Right side of the status bar
set -g status-right-length 45
set -g status-right "#[bg=#{E:@theme-accent-purple},fg=#{E:@theme-bg}] 󰭦 %Y-%m-%d #[bg=#{E:@theme-accent-cyan},fg=#{E:@theme-bg}] 󰅐 %H:%M "

# --- Window List ---
# Inactive window style
set -g window-status-format "#[bg=#{E:@theme-bg-alt}] #I #W "

# Active window style
set -g window-status-current-format "#[bg=#{E:@theme-accent-active},fg=#{E:@theme-bg-alt}] #I #W "

# Separator between windows
set -g window-status-separator " "

# --- Panes ---
# Inactive pane border
set -g pane-border-style "fg=#{E:@theme-comment}"

# Active pane border
set -g pane-active-border-style "fg=#{E:@theme-accent-active}"

# --- Message Line ---
# Style for command-line messages and prompts
set -g message-style "bg=#{E:@theme-bg-alt},fg=#{E:@theme-fg}"


# -----------------------------------------------------------------------------
# # 6. INITIALIZE TPM
# -----------------------------------------------------------------------------
# This must be the last line in the configuration file.
run '~/.tmux/plugins/tpm/tpm'
